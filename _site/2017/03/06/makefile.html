<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>
        
                Qooqle | 编写Makefile的注意事项
        
    </title>
    <link rel="stylesheet" href="/static/css/global.css">
    
    <!--    <link rel="stylesheet" href="/static/css/post.css"> -->
    <!--    <link rel="stylesheet" href="/static/css/solarized.dark.css"> -->
    
</head>
<body>
    <header>
        <h1><a class="logo" href="/">Qooqle</a></h1>
        <ul class="nav">
            <li><h2><a href="/categories.html">Categories</a></h2></li>
            <li><h2><a href="/tags.html">Tags</a></h2></li>
            <li><h2><a href="/about.html">About</a></h2></li>
        </ul>
    </header>

    <div class="content">
                <h3 class="post-title">编写Makefile的注意事项</h3>
        <div class="post-date">Mar 6, 2017 by 李江明</div>
        <div class="post-content">
            <p>记录编写makefile常用的一些变量和参数，更全面makefile编写请参考<a href="https://seisman.github.io/how-to-write-makefile/rules.html">此文</a>。</p>

<h2 id="section">书写规则</h2>

<h3 id="section-1">伪目标</h3>

<p>伪目标具有以下特点：</p>

<ol>
  <li>伪目标在编译过程中并不产生目标文件。</li>
  <li>使用make的命令时必须显式的指明伪目标才能让它生效，如：make all（make默认此）、make clean。</li>
  <li>伪目标可有可无依赖文件,一般all后会接多个源目标，而clean后则没有源目标。</li>
  <li>伪目标不可与文件重名(.PHONY可以解决这个问题)。</li>
</ol>

<h2 id="section-2">变量</h2>

<h3 id="section-3">自动化变量</h3>

<p>这些变量用于自动推导源和目标。</p>

<ul>
  <li>$@:规则中的目标文件。</li>
  <li>$&lt;:规则中第一个源文件。</li>
  <li>$^:规则中源文件列表。</li>
  <li>$?:规则中比目标文件更新的依赖文件列表。</li>
</ul>

<h2 id="section-4">隐含规则</h2>

<h3 id="section-5">隐含规则使用的变量</h3>

<h4 id="section-6">命令变量</h4>

<p>在不显式设置下列变量值得时候，<code class="highlighter-rouge">make</code>会使用默认值。</p>

<ul>
  <li>CC:C编译程序，默认是cc。</li>
  <li>CXX:C++编译程序，默认是g++。</li>
  <li>RM:删除文件命令,默认是rm -f。</li>
</ul>

<h4 id="section-7">命令参数变量</h4>

<p>显式的设置下列变量的值，<code class="highlighter-rouge">make</code>使用隐含规则的时候自动在相应位置添加相关变量的值。</p>

<ul>
  <li>CFLAGS:C编译参数。</li>
  <li>CPPFLAGS:C++编译参数。</li>
  <li>LDFLAGS:链接参数。</li>
  <li>LOADLIBS:链接文件位置。</li>
  <li>LDLIBS:链接文件。</li>
</ul>


        </div>

    </div>
    <footer>
        Power by Jekyll, stored in Github.
    </footer>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="/static/js/footer_bottom.js"></script>
</body>
</html>
